[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
user=root

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âš¡ AUREON POWER STATION - ENERGY-FOCUSED TRADING SYSTEM
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# ğŸ” KRAKEN NONCE FIX: Uses file-based atomic nonce counter (.kraken_nonce)
#    This prevents "Invalid nonce" errors when multiple processes start together
#    Each process gets a guaranteed unique, incrementing nonce
#
# PRIMARY INTERFACE: Queen Power Station (Port 8080)
#   - Shows everything as ENERGY (reserves, generation, consumption, flow)
#   - Real-time energy distribution across 4 relays
#   - Queen's autonomous energy optimization decisions
#
# STARTUP ORDER (staggered to prevent API race conditions):
#   1. Binance WS Feeder (priority=1) - FREE data, starts first
#   2. Queen Power Station (priority=5) - PRIMARY interface
#   3. Kraken Cache (priority=10) - DELAYED 30s, backup data only
#   4. Orca Kill Cycle (priority=15) - Execution engine
#   5. Autonomous Engine (priority=20) - Intelligence loops
#   6. Queen Redistribution (priority=25) - Energy optimization
#   7. Command Center (priority=50) - Secondary interface
#
# ARCHITECTURE:
#   Queen Power Station â†’ Shows all activity as energy flows
#   Queen Redistribution â†’ Analyzes & optimizes energy across relays
#   Orca Execution â†’ Executes energy moves
#   Autonomous Engine â†’ Intelligence loops
#   Command Center â†’ Internal operations dashboard
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# âš¡ AUREON PRO DASHBOARD - PRIMARY INTERFACE (Port 8080)
# Bloomberg-style professional trading terminal with Queen's Cognitive Narrator
# NOW WITH: Hive Mind voice, Binance WebSocket, Market Flow, Rich Cognition
[program:aureon-pro-dashboard]
command=python -u aureon_pro_dashboard.py
directory=/app
autostart=true
autorestart=true
priority=1
startsecs=5
startretries=5
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=PORT="8080",AUREON_STATE_DIR="/app/state"

# âš”ï¸ ORCA KILL CYCLE - Trading Execution Engine
# ONLY starts after Command Center is healthy
# ONLY executes on Queen's commands (via ThoughtBus queen.decision.*)
[program:orca-engine]
command=bash /app/deploy/start_orca.sh
directory=/app
autostart=true
autorestart=true
startretries=10
startsecs=60
priority=10
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1",HEALTH_PORT="8081"

# ğŸ§  AUTONOMOUS ENGINE - 9 Parallel Intelligence Loops
# Feeds Queen with additional intelligence signals
[program:autonomous-engine]
command=python -u aureon_autonomous_worker.py
directory=/app
autostart=true
autorestart=true
startretries=5
startsecs=30
priority=20
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1"

# ğŸ QUEEN POWER REDISTRIBUTION ENGINE
# Autonomous energy redistribution and power optimization
# Monitors idle energy, calculates drains, executes profitable moves
[program:queen-redistribution]
command=python -u queen_power_redistribution.py --interval 10 --live
directory=/app
autostart=true
autorestart=true
startretries=5
startsecs=30
priority=25
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1"

# ï¿½ COMMAND CENTER - Internal Operations Dashboard (Port 8800)
# Secondary interface for internal system monitoring
[program:command-center]
command=python -u aureon_command_center_ui.py
directory=/app
autostart=true
autorestart=true
priority=50
startsecs=10
startretries=5
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=PORT="8800",AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1"

# ï¿½ BINANCE WEBSOCKET FEEDER - FREE REAL-TIME DATA (REPLACES KRAKEN REST!)
# This is the PRIMARY market data source - FREE WebSocket, no rate limits!
# All other processes read from ws_cache/unified_prices.json
[program:binance-ws-feeder]
command=python -u unified_market_cache.py --write-interval 1.0
directory=/app
autostart=true
autorestart=true
startretries=10
startsecs=10
priority=3
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",MARKET_CACHE_DIR="/app/ws_cache"

# ğŸ”„ KRAKEN CACHE FEEDER (BACKUP ONLY - Reduced frequency)
# Only runs every 120s as backup for symbols not on Binance
# Primary data comes from Binance WebSocket above
# CRITICAL: Lower frequency to avoid "EAPI:Rate limit exceeded"
[program:kraken-cache]
command=python -u kraken_cache_feeder.py --interval-s 120
directory=/app
autostart=true
autorestart=true
startretries=10
startsecs=30
priority=6
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state"

