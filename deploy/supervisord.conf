[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
user=root

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âš¡ AUREON POWER STATION - ENERGY-FOCUSED TRADING SYSTEM
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# ğŸ” KRAKEN NONCE FIX: Uses file-based atomic nonce counter (.kraken_nonce)
#    This prevents "Invalid nonce" errors when multiple processes start together
#    Each process gets a guaranteed unique, incrementing nonce
#
# PRIMARY INTERFACE: Aureon Pro Dashboard (Port 8080)
#   - Bloomberg-style professional trading terminal
#   - Real-time portfolio P&L, live prices, whale/bot detection
#   - Queen's Cognitive Narrator with AI commentary
#   - /health endpoint for DigitalOcean health checks
#
# STARTUP ORDER (staggered to prevent API race conditions):
#   0. Aureon Pro Dashboard (priority=0) - PRIMARY interface + health checks
#   1. Binance WS Feeder (priority=3) - FREE data
#   2. Kraken Cache (priority=6) - DELAYED, backup data
#   3. Orca Kill Cycle (priority=10) - Execution engine
#   4. Autonomous Engine (priority=20) - Intelligence loops
#   5. Queen Redistribution (priority=25) - Energy optimization
#   6. Command Center (priority=50) - Secondary interface
#
# ARCHITECTURE:
#   Aureon Pro Dashboard â†’ Bloomberg-style primary interface + /health
#   Queen Redistribution â†’ Analyzes & optimizes energy across relays
#   Orca Execution â†’ Executes energy moves
#   Autonomous Engine â†’ Intelligence loops
#   Command Center â†’ Internal operations dashboard
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# âš¡ AUREON PRO DASHBOARD - PRIMARY INTERFACE + HEALTH CHECKS (Port 8080)
# Bloomberg-style professional trading terminal with Queen's Cognitive Narrator
# NOW WITH: Hive Mind voice, Binance WebSocket, Market Flow, Rich Cognition
# CRITICAL: Must bind to 0.0.0.0:8080 for DigitalOcean health checks
# NOTE: Web server starts FIRST, then loads data in background â€” /health responds instantly
[program:aureon-pro-dashboard]
command=python -u aureon_pro_dashboard.py
directory=/app
autostart=true
autorestart=true
priority=0
startsecs=10
startretries=10
# âš¡ Memory limits for 99.99% efficiency - restart if exceeds 2GB
stopasgroup=true
killasgroup=true
exitcodes=0,2
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=PORT="8080",AUREON_STATE_DIR="/app/state",PYTHONGC="700,5,5"

# âš”ï¸ ORCA KILL CYCLE - Trading Execution Engine
# ONLY starts after Command Center is healthy
# ONLY executes on Queen's commands (via ThoughtBus queen.decision.*)
[program:orca-engine]
command=bash /app/deploy/start_orca.sh
directory=/app
autostart=true
autorestart=true
startretries=10
startsecs=60
priority=10
# âš¡ Graceful shutdown for 99.99% efficiency
stopasgroup=true
killasgroup=true
stopwaitsecs=30
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1",HEALTH_PORT="8081",PYTHONGC="700,5,5"

# ğŸ§  AUTONOMOUS ENGINE - 9 Parallel Intelligence Loops
# Feeds Queen with additional intelligence signals
[program:autonomous-engine]
command=python -u aureon_autonomous_worker.py
directory=/app
autostart=true
autorestart=true
startretries=5
startsecs=30
priority=20
# âš¡ Graceful shutdown for 99.99% efficiency
stopasgroup=true
killasgroup=true
stopwaitsecs=20
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1",PYTHONGC="700,5,5"

# ğŸ QUEEN POWER REDISTRIBUTION ENGINE
# Autonomous energy redistribution and power optimization
# Monitors idle energy, calculates drains, executes profitable moves
[program:queen-redistribution]
command=python -u queen_power_redistribution.py --interval 10 --live
directory=/app
autostart=true
autorestart=true
startretries=5
startsecs=30
priority=25
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1"

# ï¿½ COMMAND CENTER - Internal Operations Dashboard (Port 8800)
# Secondary interface for internal system monitoring
[program:command-center]
command=python -u aureon_command_center_ui.py
directory=/app
autostart=true
autorestart=true
priority=50
startsecs=10
startretries=5
# âš¡ Graceful shutdown for 99.99% efficiency
stopasgroup=true
killasgroup=true
stopwaitsecs=10
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=PORT="8800",AUREON_STATE_DIR="/app/state",AUREON_ENABLE_AUTONOMOUS_CONTROL="1",PYTHONGC="700,5,5"

# ï¿½ BINANCE WEBSOCKET FEEDER - FREE REAL-TIME DATA (REPLACES KRAKEN REST!)
# This is the PRIMARY market data source - FREE WebSocket, no rate limits!
# All other processes read from ws_cache/unified_prices.json
[program:binance-ws-feeder]
command=python -u unified_market_cache.py --write-interval 1.0
directory=/app
autostart=true
autorestart=true
startretries=10
startsecs=10
priority=3
# âš¡ Graceful shutdown for 99.99% efficiency
stopasgroup=true
killasgroup=true
stopwaitsecs=5
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",MARKET_CACHE_DIR="/app/ws_cache",PYTHONGC="700,5,5"

# ğŸ”„ KRAKEN CACHE FEEDER (BACKUP ONLY - Reduced frequency)
# Only runs every 120s as backup for symbols not on Binance
# Primary data comes from Binance WebSocket above
# CRITICAL: Lower frequency to avoid "EAPI:Rate limit exceeded"
[program:kraken-cache]
command=python -u kraken_cache_feeder.py --interval-s 120
directory=/app
autostart=true
autorestart=true
startretries=10
startsecs=30
priority=6
# âš¡ Graceful shutdown for 99.99% efficiency
stopasgroup=true
killasgroup=true
stopwaitsecs=10
stdout_logfile=/dev/fd/1
stderr_logfile=/dev/fd/2
stdout_logfile_maxbytes=0
stderr_logfile_maxbytes=0
environment=AUREON_STATE_DIR="/app/state",PYTHONGC="700,5,5"

